{"version":3,"sources":["webpack:///./src/views/home/dongtai.vue?3bff","webpack:///src/views/home/dongtai.vue","webpack:///./src/views/home/dongtai.vue?ac0a","webpack:///./src/views/home/dongtai.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","position","attrs","title","left-text","right-text","left-arrow","on","click-left","onClickLeft","click-right","onClickRight","border","width","margin","type","rows","cols","placeholder","model","value","callback","$$v","expression","top","left","multiple","max-count","upload-text","fileList","staticRenderFns","dongtaivue_type_script_lang_js_","name","data","show","img","file","methods","$router","go","_this","userId","localStorage","getItem","formdata","FormData","length","id","$route","query","key","dynamiccontent","uploadFile","append","axios_default","method","headers","Content-Type","url","then","res","push","_key","toast","fail","home_dongtaivue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,CAAaC,SAAA,aAAuB,CAAAH,EAAA,eAAoBI,MAAA,CAAOC,MAAA,KAAAC,YAAA,KAAAC,aAAA,KAAAC,aAAA,IAAgEC,GAAA,CAAKC,aAAAd,EAAAe,YAAAC,cAAAhB,EAAAiB,gBAA6Db,EAAA,kBAAuBE,YAAA,CAAaY,OAAA,iBAAAC,MAAA,OAAAC,OAAA,WAA4D,CAAAhB,EAAA,aAAkBI,MAAA,CAAOa,KAAA,WAAAC,KAAA,KAAAC,KAAA,IAAAC,YAAA,SAA+DC,MAAA,CAAQC,MAAA1B,EAAA,MAAA2B,SAAA,SAAAC,GAA2C5B,EAAA0B,MAAAE,GAAcC,WAAA,YAAqB,GAAAzB,EAAA,gBAAyBE,YAAA,CAAaC,SAAA,WAAAuB,IAAA,OAAAC,KAAA,QAAiDvB,MAAA,CAAQwB,SAAA,GAAAC,YAAA,EAAAC,cAAA,QAAiDT,MAAA,CAAQC,MAAA1B,EAAA,SAAA2B,SAAA,SAAAC,GAA8C5B,EAAAmC,SAAAP,GAAiBC,WAAA,eAAwB,IACxyBO,EAAA,oCCyBAC,EAAA,CACAC,KAAA,UACAC,KAFA,WAGA,OACAb,MAAA,GACAS,SAAA,GACAK,KAAA,OACAC,IAAA,GACAC,KAAA,KAGAC,QAAA,CACA5B,YADA,WAEAd,KAAA2C,QAAAC,IAAA,IAGA5B,aALA,WAKA,IAAA6B,EAAA7C,KACA8C,EAAAC,aAAAC,QAAA,UACA,GAAAF,EAAA,CACA,IAAAG,EAAA,IAAAC,SACA,GAAAlD,KAAAkC,SAAAiB,OACAnD,KAAAyC,KAAAzC,KAAAkC,SAAA,GAAAO,KAGAzC,KAAAyC,KAAA,GAIA,IAAAW,EAAApD,KAAAqD,OAAAC,MAAAF,GACAd,EAAA,GACA,GAAAc,EAAA,CAOA,QAAAG,KALAjB,EAAA,CACAkB,eAAAxD,KAAAyB,MACAgC,WAAAzD,KAAAyC,KACAW,MAEAd,EACAW,EAAAS,OAAAH,EAAAjB,EAAAiB,IAEAI,IAAA,CACAC,OAAA,OACAC,QAAA,CAAAC,eAAA,uBACAC,IAAA,6CACAzB,KAAAW,IACAe,KAAA,SAAAC,GAEApB,EAAAF,QAAAuB,KAAA,CAAA7B,KAAA,mBAGA,CAOA,QAAA8B,KALA7B,EAAA,CACAkB,eAAAxD,KAAAyB,MACAgC,WAAAzD,KAAAyC,KACAK,UAEAR,EACAW,EAAAS,OAAAS,EAAA7B,EAAA6B,IAGAR,IAAA,CACAC,OAAA,OACAC,QAAA,CAAAC,eAAA,uBACAC,IAAA,0CACAzB,KAAAW,IACAe,KAAA,SAAAC,GAEApB,EAAAF,QAAAuB,KAAA,CAAA7B,KAAA,qBAIA+B,EAAA,KAAAC,KAAA,WClGgWC,EAAA,cCOhWC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAxE,EACAqC,GACF,EACA,KACA,KACA,MAIeuC,EAAA,WAAAH","file":"js/chunk-2d0d6f80.30c8f7c7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"position\":\"relative\"}},[_c('van-nav-bar',{attrs:{\"title\":\"动态\",\"left-text\":\"返回\",\"right-text\":\"发布\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft,\"click-right\":_vm.onClickRight}}),_c('van-cell-group',{staticStyle:{\"border\":\"1px solid #000\",\"width\":\"90vw\",\"margin\":\"0 auto\"}},[_c('van-field',{attrs:{\"type\":\"textarea\",\"rows\":\"10\",\"cols\":\"1\",\"placeholder\":\"请输入内容\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_c('van-uploader',{staticStyle:{\"position\":\"absolute\",\"top\":\"34vh\",\"left\":\"20px\"},attrs:{\"multiple\":\"\",\"max-count\":1,\"upload-text\":\"上传图片\"},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div style=\"position:relative\">\r\n    <van-nav-bar\r\n      title=\"动态\"\r\n      left-text=\"返回\"\r\n      right-text=\"发布\"\r\n      left-arrow\r\n      @click-left=\"onClickLeft\"\r\n      @click-right=\"onClickRight\"\r\n    />\r\n    <van-cell-group style=\"border:1px solid #000 ;width:90vw;margin:0 auto\">\r\n      <van-field type=\"textarea\" rows=\"10\" cols=\"1\" v-model=\"value\" placeholder=\"请输入内容\" />\r\n    </van-cell-group>\r\n    <van-uploader\r\n      v-model=\"fileList\"\r\n      multiple\r\n      :max-count=\"1\"\r\n      style=\"position:absolute;top:34vh;left:20px\"\r\n      upload-text=\"上传图片\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from \"vant\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"dongtai\",\r\n  data() {\r\n    return {\r\n      value: \"\",\r\n      fileList: [],\r\n      show: \"true\",\r\n      img: \"\",\r\n      file: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n\r\n    onClickRight() {\r\n      var userId = localStorage.getItem(\"userId\");\r\n      if (userId) {\r\n        var formdata = new FormData();\r\n        if (this.fileList.length != 0) {\r\n          this.file = this.fileList[0].file;\r\n          // console.log(1);\r\n        } else {\r\n          this.file = \"\";\r\n          // console.log(0);\r\n        }\r\n\r\n        var id = this.$route.query.id;\r\n        var data = {};\r\n        if (id) {\r\n          //修改动态\r\n          data = {\r\n            dynamiccontent: this.value,\r\n            uploadFile: this.file,\r\n            id: id\r\n          };\r\n          for (let key in data) {\r\n            formdata.append(key, data[key]);\r\n          }\r\n          axios({\r\n            method: \"post\",\r\n            headers: { \"Content-Type\": \"multipart/form-data\" },\r\n            url: \"http://10.8.157.63:8080/user/updateDynamic\",\r\n            data: formdata\r\n          }).then(res => {\r\n            // console.log(res);\r\n            this.$router.push({ name: \"myaction\" });\r\n          });\r\n          // console.log(1);\r\n        } else {\r\n          //新增动态\r\n          data = {\r\n            dynamiccontent: this.value,\r\n            uploadFile: this.file,\r\n            userId: userId\r\n          };\r\n          for (let key in data) {\r\n            formdata.append(key, data[key]);\r\n          }\r\n          // console.log(0);\r\n          axios({\r\n            method: \"post\",\r\n            headers: { \"Content-Type\": \"multipart/form-data\" },\r\n            url: \"http://10.8.157.63:8080/user/addDynamic\",\r\n            data: formdata\r\n          }).then(res => {\r\n            // console.log(res);\r\n            this.$router.push({ name: \"myaction\" });\r\n          });\r\n        }\r\n      } else {\r\n        Toast.fail(\"请先登录\");\r\n      }\r\n\r\n      /*  var data = {\r\n        dynamiccontent: this.value,\r\n        uploadFile: this.file,\r\n        userId: 1\r\n      }; */\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dongtai.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dongtai.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dongtai.vue?vue&type=template&id=55e0b822&\"\nimport script from \"./dongtai.vue?vue&type=script&lang=js&\"\nexport * from \"./dongtai.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}